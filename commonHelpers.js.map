{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay.js","../src/js/index.js"],"sourcesContent":["const apiUrl = 'https://pixabay.com/api/';\nconst apiKey = '44463145-8dd3def1cdcb4fcdb78deec18';\n\nconst searchParams = new URLSearchParams({\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n});\n\nexport default class PixabayApi {\n  constructor() {\n    this.page = 1;\n    this.pageSize = 40;\n  }\n\n  async fetchImages(searchQuery) {\n    const url = `${apiUrl}?key=${apiKey}&q=${searchQuery}&${searchParams}&page=${this.page}&per_page=${this.pageSize}`;\n    const response = await fetch(url);\n    const data = await response.json();\n    return data;\n  }\n}\n","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\n\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport PixabayApi from './pixabay';\n\nconst pixabayApi = new PixabayApi();\n\nconst searchForm = document.querySelector('#search-form');\nconst loader = document.querySelector('.loader');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreButton = document.querySelector('.load-more');\n\nsearchForm.addEventListener('submit', onSearch);\nloadMoreButton.addEventListener('click', onLoadMore);\n\nlet searchQuery = '';\n\nfunction onSearch(e) {\n  e.preventDefault();\n\n  searchQuery = e.currentTarget.searchQuery.value.trim();\n\n  if (!searchQuery) {\n    return;\n  }\n\n  loader.classList.remove('hidden');\n  loadMoreButton.classList.add('hidden');\n\n  resetGallery();\n\n  pixabayApi.page = 1;\n  pixabayApi\n    .fetchImages(searchQuery)\n    .then(data => {\n      if (data.totalHits === 0) {\n        throw new Error();\n      }\n\n      renderGalleryImages(data);\n      loadMoreButton.classList.remove('hidden');\n\n      iziToast.success({\n        title: 'Success',\n        message: `Hooray! We found ${data.totalHits} images.`,\n        position: 'topRight',\n      });\n    })\n    .catch(error => {\n      iziToast.error({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again.',\n        position: 'topRight',\n      });\n      loader.classList.add('hidden');\n    });\n\n  e.currentTarget.reset();\n}\n\nfunction onLoadMore() {\n  loader.classList.remove('hidden');\n  pixabayApi.page += 1;\n  pixabayApi\n    .fetchImages(searchQuery)\n    .then(data => {\n      renderGalleryImages(data);\n\n      if (data.totalHits < pixabayApi.pageSize * pixabayApi.page) {\n        loadMoreButton.classList.add('hidden');\n        iziToast.warning({\n          title: 'Warning',\n          message: \"We're sorry, but you've reached the end of search results.\",\n          position: 'topRight',\n        });\n      }\n    })\n    .catch(error => {\n      iziToast.error({\n        title: 'Error',\n        message: 'No images found',\n        position: 'topRight',\n      });\n\n      loadMoreButton.classList.add('hidden');\n      loader.classList.add('hidden');\n    });\n}\n\nfunction renderGalleryImages(data) {\n  gallery.insertAdjacentHTML(\n    'beforeend',\n    data.hits\n      .map(\n        ({\n          webformatURL,\n          largeImageURL,\n          tags,\n          likes,\n          views,\n          comments,\n          downloads,\n        }) => {\n          return `<div class=\"photo-card\">\n        <a href=\"${largeImageURL}\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n        </a>\n        <div class=\"info\">\n          <p class=\"info-item\">\n            <b>Likes</b>\n            <span>${likes}</span>\n          </p>\n          <p class=\"info-item\">\n            <b>Views</b>\n            <span>${views}</span>\n          </p>\n          <p class=\"info-item\">\n            <b>Comments</b>\n            <span>${comments}</span>\n          </p>\n          <p class=\"info-item\">\n            <b>Downloads</b>\n            <span>${downloads}</span>\n          </p>\n        </div>\n        </div>`;\n        }\n      )\n      .join('')\n  );\n\n  loader.classList.add('hidden');\n\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n\n  lightbox.refresh();\n}\n\nfunction resetGallery() {\n  gallery.innerHTML = '';\n}\n"],"names":["apiUrl","apiKey","searchParams","PixabayApi","searchQuery","url","pixabayApi","searchForm","loader","gallery","loadMoreButton","onSearch","onLoadMore","e","resetGallery","data","renderGalleryImages","iziToast","error","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox"],"mappings":"6vBAAA,MAAMA,EAAS,2BACTC,EAAS,qCAETC,EAAe,IAAI,gBAAgB,CACvC,WAAY,QACZ,YAAa,aACb,WAAY,EACd,CAAC,EAEc,MAAMC,CAAW,CAC9B,aAAc,CACZ,KAAK,KAAO,EACZ,KAAK,SAAW,EACjB,CAED,MAAM,YAAYC,EAAa,CAC7B,MAAMC,EAAM,GAAGL,CAAM,QAAQC,CAAM,MAAMG,CAAW,IAAIF,CAAY,SAAS,KAAK,IAAI,aAAa,KAAK,QAAQ,GAGhH,OADa,MADI,MAAM,MAAMG,CAAG,GACJ,MAE7B,CACH,CCbA,MAAMC,EAAa,IAAIH,EAEjBI,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAiB,SAAS,cAAc,YAAY,EAE1DH,EAAW,iBAAiB,SAAUI,CAAQ,EAC9CD,EAAe,iBAAiB,QAASE,CAAU,EAEnD,IAAIR,EAAc,GAElB,SAASO,EAASE,EAAG,CACnBA,EAAE,eAAc,EAEhBT,EAAcS,EAAE,cAAc,YAAY,MAAM,KAAI,EAE/CT,IAILI,EAAO,UAAU,OAAO,QAAQ,EAChCE,EAAe,UAAU,IAAI,QAAQ,EAErCI,IAEAR,EAAW,KAAO,EAClBA,EACG,YAAYF,CAAW,EACvB,KAAKW,GAAQ,CACZ,GAAIA,EAAK,YAAc,EACrB,MAAM,IAAI,MAGZC,EAAoBD,CAAI,EACxBL,EAAe,UAAU,OAAO,QAAQ,EAExCO,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,oBAAoBF,EAAK,SAAS,WAC3C,SAAU,UAClB,CAAO,CACP,CAAK,EACA,MAAMG,GAAS,CACdD,EAAS,MAAM,CACb,MAAO,QACP,QACE,2EACF,SAAU,UAClB,CAAO,EACDT,EAAO,UAAU,IAAI,QAAQ,CACnC,CAAK,EAEHK,EAAE,cAAc,QAClB,CAEA,SAASD,GAAa,CACpBJ,EAAO,UAAU,OAAO,QAAQ,EAChCF,EAAW,MAAQ,EACnBA,EACG,YAAYF,CAAW,EACvB,KAAKW,GAAQ,CACZC,EAAoBD,CAAI,EAEpBA,EAAK,UAAYT,EAAW,SAAWA,EAAW,OACpDI,EAAe,UAAU,IAAI,QAAQ,EACrCO,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,6DACT,SAAU,UACpB,CAAS,EAET,CAAK,EACA,MAAMC,GAAS,CACdD,EAAS,MAAM,CACb,MAAO,QACP,QAAS,kBACT,SAAU,UAClB,CAAO,EAEDP,EAAe,UAAU,IAAI,QAAQ,EACrCF,EAAO,UAAU,IAAI,QAAQ,CACnC,CAAK,CACL,CAEA,SAASQ,EAAoBD,EAAM,CACjCN,EAAQ,mBACN,YACAM,EAAK,KACF,IACC,CAAC,CACC,aAAAI,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACV,IACiB;AAAA,mBACEL,CAAa;AAAA,sBACVD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,oBAK5BC,CAAK;AAAA;AAAA;AAAA;AAAA,oBAILC,CAAK;AAAA;AAAA;AAAA;AAAA,oBAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,oBAIRC,CAAS;AAAA;AAAA;AAAA,eAKtB,EACA,KAAK,EAAE,CACd,EAEEjB,EAAO,UAAU,IAAI,QAAQ,EAEZ,IAAIkB,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAClB,CAAG,EAEQ,QAAO,CAClB,CAEA,SAASZ,GAAe,CACtBL,EAAQ,UAAY,EACtB"}